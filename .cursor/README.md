# MCP統合構成システム

## 🎯 目的

AutoモードでもClaude/GPTのプロ級分担、指示一貫性、ハルシネ排除、ガードレール実装を行うための統合システムです。

## 🏗️ 設計思想

### 1. **モデル分担の最適化**
- **Groq**: 高速処理と大規模コンテキスト処理
- **Claude**: 事実確認と品質保証
- **GPT-4**: 創造性と表現改善

### 2. **一貫性の保証**
- 統一されたプロンプトテンプレート
- 標準化された出力形式
- 品質基準の明確化

### 3. **ハルシネーション対策**
- リアルタイム検証
- ソース確認の自動化
- 信頼度スコアリング

### 4. **ガードレール実装**
- 安全性チェックの自動化
- 不適切コンテンツの検出
- 品質基準の強制適用

## 📁 ファイル構成

### `.cursor/project-rules.json`
**役割**: 役割・モデル分担・一貫性構成
- 各AIモデルの役割定義
- ルーティングルール
- 品質基準
- エラーハンドリング

### `.cursor/mcp_prompt.json`
**役割**: 出力の安定化用テンプレート
- 各タスク用のプロンプトテンプレート
- 出力形式の標準化
- 品質保証のための制約

### `.cursor/mcp_guardrails.json`
**役割**: 誤爆・誤表現の制御
- 禁止フレーズの定義
- 安全性チェック
- 品質基準の強制

### `.cursor/mcp_query.json`
**役割**: 検索補正・ハルシネ対策・初期補正
- 検索戦略の最適化
- ハルシネーション予防
- リアルタイム検証

## 🔄 処理フロー

### Step 1: 初期分析
1. 研究データの解析
2. 適切なモデルの選択
3. プロンプトテンプレートの適用

### Step 2: 内容生成
1. Groqによる初期原稿生成
2. Claudeによる事実確認
3. GPT-4による表現改善

### Step 3: 品質保証
1. ガードレールによる安全性チェック
2. 品質メトリクスの計算
3. 必要に応じた修正

### Step 4: 最終出力
1. 統一された形式での出力
2. 信頼度スコアの付与
3. ログ記録

## 🛡️ 安全性機能

### 自動検出
- 医療関連コンテンツ
- 金融関連コンテンツ
- 心理関連コンテンツ

### 自動修正
- 不適切表現の置換
- 免責事項の自動追加
- 品質基準の強制適用

## 📊 品質管理

### メトリクス
- **可読性スコア**: 文章の理解しやすさ
- **エンゲージメントスコア**: 視聴者の興味を引く要素
- **構造スコア**: 論理的な構成
- **信頼度スコア**: 情報の正確性

### 閾値
- 可読性: 0.7以上
- エンゲージメント: 0.6以上
- 構造: 0.8以上
- 信頼度: 0.7以上

## 🔧 カスタマイズ

### 設定変更
各JSONファイルを編集することで、システムの動作をカスタマイズできます。

### 拡張機能
新しいAIモデルや機能を追加する際は、対応するJSONファイルに設定を追加してください。

## 📝 ログ機能

### 記録内容
- 処理ステップ
- エラー情報
- 品質メトリクス
- 安全性チェック結果

### ログファイル
- `logs/youtube_script_generation_YYYYMMDD_HHMMSS.log`
- `logs/guardrail_violations.json`

## 🚀 使用方法

### 基本実行
```bash
python youtube_script_generation_system.py
```

### 環境変数設定
```bash
export GROQ_API_KEY="your_groq_api_key"
```

### 設定ファイルの確認
各JSONファイルが正しく配置されていることを確認してください。

## 🔄 更新履歴

### v2.0.0 (2024-01-XX)
- MCP統合構成の実装
- 4つのJSONファイルによる統合管理
- 品質保証システムの強化
- 安全性機能の追加

---

**注意**: このシステムは研究目的で設計されています。商用利用の際は適切なライセンス確認を行ってください。 